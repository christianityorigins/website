<!DOCTYPE html>
<html lang="en">
<html>
<head>
  {% include head.html %}
{% seo %}

<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://newchronology.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='https://cdn.matomo.cloud/newchronology.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->

</head>
<body>
  {% include header.html %}
  {{ content }}
  {% include footer.html %}

  {% if page.open_links_in_new_tab %}
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const links = document.querySelectorAll('a');
        const siteBaseUrl = '{{ site.url }}'; // Get the base URL of your site

        links.forEach(link => {
          const href = link.getAttribute('href');
          if (href && (href.startsWith('http') || href.startsWith('https')) && !href.startsWith(siteBaseUrl)) {
            link.setAttribute('target', '_blank');
            link.setAttribute('rel', 'noopener noreferrer'); // For security reasons
          }
        });
      });
    </script>
  {% endif %}
</body>
</html>
